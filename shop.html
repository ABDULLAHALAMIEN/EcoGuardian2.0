<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopEase by Team Coding Chaos</title>
  <style>
    :root{--primary:#2F8F4A;--primary-2:#4CAF6A;--bg:#f4f6f8;--card:#fff;--muted:#6b7280}
    [data-theme="dark"]{--bg:#0f1724;--card:#111827;--muted:#9ca3af}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--muted)}
    .center{max-width:980px;margin:36px auto;padding:16px}
    .card{background:var(--card);border-radius:10px;padding:16px;box-shadow:0 6px 20px rgba(2,6,23,0.08)}
    h1,h2{color:var(--primary)}

    /* Topbar */
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
    .top-actions{display:flex;gap:8px;align-items:center}
    .search{padding:8px;border-radius:8px;border:1px solid #e5e7eb;width:320px}

    /* products */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:16px}
    .product{background:var(--card);padding:12px;border-radius:10px;text-align:center;color:var(--muted)}
    .product img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .product h3{margin:8px 0;color:#111827}
    .price{color:var(--primary);font-weight:700}
    .row{display:flex;gap:8px;align-items:center}

    .modal{position:fixed;inset:0;background:rgba(2,6,23,0.5);display:flex;align-items:center;justify-content:center}
    .modal .card{width:520px}

    footer{text-align:center;margin-top:32px;color:var(--muted)}

    #productList{max-height:500px;overflow-y:auto;}
  </style>
</head>

<body data-theme="light">
  <div class="center">

    <div class="card">
      <div class="topbar">
        <h1>ShopEase</h1>
        <div class="top-actions">
          <input id="themeToggle" type="checkbox" /> ðŸŒ“
        </div>
      </div>

      <!-- Shop Area ALWAYS visible -->
      <div id="shopArea">
        <div class="topbar">
          <div>
            <strong>Welcome to ShopEase</strong>
            <div style="font-size:13px;color:var(--muted)">Browsing without login</div>
          </div>

          <div class="top-actions">
            <input id="searchInput" class="search" placeholder="Search products..." oninput="renderProducts()" />
            <button onclick="openAdmin()">Admin</button>
            <button onclick="toggleCart()">Cart (<span id="cartCount">0</span>)</button>
          </div>
        </div>

        <div class="card">
          <h2>Products</h2>
          <div class="grid" id="productGrid"></div>
        </div>
      </div>
    </div>

    <footer>Â© 2025 ShopEase â€” Team Coding Chaos</footer>
  </div>

  <!-- Admin modal -->
  <div id="adminModal" class="modal" style="display:none">
    <div class="card">
      <h2>Admin Panel</h2>
      <p style="font-size:13px;color:var(--muted)">Protected by an admin password.</p>

      <div id="adminAuth">
        <label>Admin password <input id="adminPass" type="password" /></label>
        <button onclick="authAdmin()">Enter</button>
      </div>

      <div id="adminControls" style="display:none;margin-top:12px">
        <h3>Add / Edit Product</h3>
        <label>Title<input id="pTitle" /></label>
        <label>Price (RM)<input id="pPrice" type="number" /></label>
        <label>Image URL<input id="pImage" placeholder="https://..." /></label>
        <div style="margin-top:8px" class="row">
          <button onclick="saveProduct()">Save</button>
          <button onclick="closeAdmin()" style="background:#e5e7eb;color:#111;margin-left:6px">Close</button>
        </div>
        <hr style="margin:12px 0" />
        <h3>Manage Products</h3>
        <div id="adminList"></div>
      </div>
    </div>
  </div>

  <script>
    const SAMPLE_PRODUCTS=[
      {id:1,title:'Product Code',price:70,image:'https://i.sstatic.net/4cymA.png'},
      {id:2,title:'Product with Code installed',price:470,image:'https://placehold.co/400x300?text=Keyboard'},
      {id:3,title:'Product without code installed',price:400,image:'https://placehold.co/400x300?text=Headphones'},
      {id:4,title:'Service',price:20,image:'https://placehold.co/400x300?text=Speaker'}
    ];

    function get(k,def){try{const v=localStorage.getItem(k);return v?JSON.parse(v):def}catch(e){return def}}
    function set(k,v){localStorage.setItem(k,JSON.stringify(v));}

    let products=get('shop_products',SAMPLE_PRODUCTS);

    document.addEventListener('DOMContentLoaded',()=>{
      const themeToggle=document.getElementById('themeToggle');
      const savedTheme=localStorage.getItem('shop_theme')||'light';
      document.body.setAttribute('data-theme',savedTheme);
      themeToggle.checked=savedTheme==='dark';
      themeToggle.addEventListener('change',()=>{
        const next=themeToggle.checked?'dark':'light';
        document.body.setAttribute('data-theme',next);
        localStorage.setItem('shop_theme',next);
      });

      renderProducts();
    });

    function renderProducts(){
      const grid=document.getElementById('productGrid');
      grid.innerHTML="";
      const q=document.getElementById('searchInput')?.value?.toLowerCase()||"";

      products.filter(p=>p.title.toLowerCase().includes(q)).forEach(p=>{
        const el=document.createElement("div");
        el.className="product card";
        el.innerHTML=`
          <img src="${p.image}" />
          <h3>${p.title}</h3>
          <div class="price">RM ${p.price}</div>
          <button style="margin-top:10px">View</button>
        `;
        grid.appendChild(el);
      });
    }

    // ADMIN
    const ADMIN_PASS="admin123";

    function openAdmin(){
      document.getElementById("adminModal").style.display="flex";
    }
    function closeAdmin(){
      document.getElementById("adminModal").style.display="none";
    }
    function authAdmin(){
      const p=document.getElementById("adminPass").value;
      if(p===ADMIN_PASS){
        document.getElementById("adminAuth").style.display="none";
        document.getElementById("adminControls").style.display="block";
        renderAdminList();
      }else alert("Wrong password");
    }

    function saveProduct(){
      const title=document.getElementById("pTitle").value.trim();
      const price=Number(document.getElementById("pPrice").value);
      const image=document.getElementById("pImage").value.trim()||"https://placehold.co/400x300";

      if(!title||!price){ alert("Enter title & price"); return; }

      const id=Math.max(0,...products.map(p=>p.id))+1;
      products.push({id,title,price,image});
      set('shop_products',products);
      renderProducts();
      renderAdminList();
      alert("Saved!");
    }

    function renderAdminList(){
      const list=document.getElementById("adminList");
      list.innerHTML="";
      products.forEach(p=>{
        const el=document.createElement("div");
        el.style.margin="6px 0";
        el.innerHTML=`
          <strong>${p.title}</strong> â€” RM ${p.price}
          <button onclick="deleteProduct(${p.id})" style="background:#ef4444;color:white;margin-left:6px">Delete</button>
        `;
        list.appendChild(el);
      });
    }

    function deleteProduct(id){
      if(!confirm("Delete product?")) return;
      products=products.filter(p=>p.id!==id);
      set("shop_products",products);
      renderProducts();
      renderAdminList();
    }
  </script>
</body>
</html>
